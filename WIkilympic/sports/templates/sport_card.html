{% load static %}
<article id="sport-card-{{ sport.id }}" class="relative bg-white rounded-lg border border-gray-200 overflow-hidden cursor-pointer group transition-transform duration-300 ease-in-out hover:scale-105">
    <!-- Thumbnail Image -->
    <a href="{% url 'sports:show_sport' sport.id %}" class="block relative overflow-hidden">
        {% if sport.sport_img %}
        <img src="{{ sport.sport_img }}" alt="{{ sport.sport_name }}" 
             class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110">
        {% else %}
        <div class="w-full h-48 bg-gray-200"></div>
        {% endif %}
    </a>

    <!-- Dark gradient overlay -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent pointer-events-none"></div>

    <!-- Sport name overlay -->
    <div class="absolute bottom-3 left-3 text-white font-semibold text-lg drop-shadow-lg">
        {{ sport.sport_name }}
    </div>

    <!-- Details overlay (appear on hover) -->
    <div class="absolute inset-0 bg-black/80 text-white p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-between pointer-events-none group-hover:pointer-events-auto">
        <div>
            <h3 class="text-xl font-bold">{{ sport.sport_name }}</h3>
        </div>              
        <a href="{% url 'sports:show_sport' sport.id %}" 
            class="mt-4 inline-block px-4 py-2 rounded-full font-semibold transition-all duration-200 shadow-md w-max"
            style="background-color: white; color: rgb(30,60,200); outline: 2px solid white;" 
            onmouseover="this.style.backgroundColor='rgb(255,255,0)'; this.style.color='rgb(30,60,200)'; this.style.transform='scale(1.1)';" 
            onmouseout="this.style.backgroundColor='white'; this.style.color='rgb(30,60,200)'; this.style.transform='scale(1)';"> 
            Discover More
        </a>
    </div>

    <!-- Admin Buttons (Edit & Delete) -->
    {% if user.is_superuser %}
    <div class="absolute top-3 right-3 flex space-x-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        <!-- Edit button -->
        <a href="javascript:void(0);" 
            onclick="setupEditModal('{{ sport.id }}')"
            class="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors flex items-center justify-center"
            style="transform: scale(1);"
            onmouseover="this.style.transform='scale(1.1)';"
            onmouseout="this.style.transform='scale(1)';">
            <i class="fa-solid fa-pencil" style="color: #ffffff;"></i>
        </a>     
    
        <!-- Delete button -->
        <a href="javascript:void(0);" 
            onclick="deleteSport('{{ sport.id }}')"
            class="px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors flex items-center justify-center"
            style="transform: scale(1);"
            onmouseover="this.style.transform='scale(1.1)';"
            onmouseout="this.style.transform='scale(1)';">
            <i class="fa-solid fa-trash"></i>
        </a>
    </div>
    {% endif %}
</article>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script>
    async function deleteSport(sportId) {
        if (!confirm("Are you sure you want to delete this sport?")) return;
    
        const response = await fetch(`/sports/delete-sport-ajax/${sportId}/`, {
            method: "POST",
        });
    
        try {
            const data = await response.json();
    
            if (data.status === "success") {
                alert(data.message);
    
                const card = document.getElementById(`sport-card-${sportId}`);
                if (card) {
                    card.remove();
                }
    
                document.dispatchEvent(new CustomEvent('sportDeleted', { detail: sportId }));
            } else {
                alert("Failed to delete sport: " + data.message);
            }
        } catch (error) {
            console.error("Error:", error);
            alert("Failed to delete sport. (Invalid JSON returned)");
        }
    }
</script>    